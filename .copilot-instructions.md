# GitHub Copilot Instructions for WorkMood

## Project Overview
WorkMood is a cross-platform desktop application for tracking work mood impact on emotional well-being. It's built as a .NET MAUI application targeting desktop platforms (Windows and macOS).

## Technology Stack
- **Framework**: .NET 9.0
- **Platform**: .NET MAUI (Multi-platform App UI)
- **Target Frameworks**: 
  - `net9.0-windows10.0.19041.0` (Windows)
  - `net9.0-maccatalyst` (macOS)
- **Language**: C#
- **UI Framework**: XAML

## Project Structure
- **Solution**: `WorkMood.sln` - Main solution file
- **Main Project**: `MauiApp/WorkMood.MauiApp.csproj` - MAUI application project
- **Documentation**: Generated using Doculisp (see `docs/` folder)

## Development Guidelines

### Building the Application
When building the MAUI application, **always specify the target framework** using the `--framework` parameter:

```bash
# For Windows development
dotnet build --framework net9.0-windows10.0.19041.0

# For macOS development  
dotnet build --framework net9.0-maccatalyst

# For publishing
dotnet publish --framework net9.0-windows10.0.19041.0  # Windows
dotnet publish --framework net9.0-maccatalyst          # macOS
```

### Architecture Patterns
The project follows a clean architecture approach with:
- **MVVM Pattern**: ViewModels in `ViewModels/` folder
- **Services**: Business logic and data access in `Services/`
- **Adapters**: Data transformation in `Adapters/`
- **Models**: Data models in `Models/`
- **Pages**: XAML views in `Pages/`
- **Infrastructure**: Base classes and utilities
- **Converters**: Value converters for XAML binding
- **Strategies**: Strategy pattern implementations

### Key Services
- `IMoodDataService`: Core mood data management
- `IMoodVisualizationService`: Data visualization
- `IScheduleConfigService`: Schedule configuration
- `ILoggingService`: Application logging
- `INavigationService`: Page navigation
- `IBrowserService`: External browser integration

### Code Style
- Use nullable reference types (enabled in project)
- Follow C# naming conventions
- Use dependency injection for service registration
- Implement proper MVVM separation of concerns

### Platform-Specific Considerations
- **Windows**: Minimum version 10.0.17763.0 (Windows 10 version 1809)
- **macOS**: Minimum version 15.0 (macOS Monterey)
- **MacCatalyst**: Supports both x64 and ARM64 architectures

### Common Commands
```bash
# Build entire solution
dotnet build WorkMood.sln

# Run the application (from MauiApp directory)
dotnet run --project WorkMood.MauiApp.csproj --framework net9.0-windows10.0.19041.0

# Watch mode for development
dotnet watch run --project WorkMood.sln
```

### Testing
- Focus on unit testing ViewModels and Services
- Consider platform-specific testing when adding new features
- Test data visualization components thoroughly

### Refactoring Guidelines
When refactoring code, follow these principles to ensure safe and incremental improvements:

#### Test-Driven Refactoring
- **Prioritize automated tests**: Always run existing automated tests before and after refactoring
- **Use manual testing when necessary**: When automated test coverage is inadequate, supplement with manual testing to verify behavior (Verified by user)
- **Identify test gaps**: If manual testing is required, consider adding automated tests for better future coverage
- **Red-Green-Refactor**: Ensure all tests pass before refactoring, refactor while keeping tests green

#### Incremental Changes
- **Smallest possible increments**: Make the smallest change that provides value, preferably no larger than a single method
- **One concept at a time**: Focus on one refactoring concept per increment (e.g., extract method, rename variable, remove duplication)
- **Frequent commits**: Commit after each successful increment (verified by tests or manual testing) to maintain a safe rollback point
- **Validate each step**: Ensure each increment compiles and passes tests before proceeding

#### Refactoring Priorities
1. **Method-level changes**: Extract methods, rename parameters, simplify method logic
2. **Class-level changes**: Extract classes, move methods, improve encapsulation
3. **Architecture-level changes**: Only after smaller increments, and with comprehensive test coverage

#### Safety Practices
- **Preserve external behavior**: Refactoring should not change observable behavior
- **Maintain API contracts**: Keep public interfaces stable unless explicitly changing them
- **Update tests minimally**: Only update tests if the refactoring legitimately changes testable behavior
- **Document breaking changes**: Clearly communicate any intentional behavioral changes

### Documentation
- Documentation is generated using Doculisp
- Source files are in `docs/` folder
- Main documentation files: `BUILD.md`, `USER-GUIDE.md`
- Always update documentation when adding new features

### Important Notes
- This is a desktop-only application (no mobile targets)
- Uses local data storage (no cloud services)
- Focuses specifically on work-related mood tracking
- Application icon: `smiles.ico/png`

When suggesting code changes or new features, always consider:
1. MVVM pattern compliance
2. Proper service injection
3. Platform-specific requirements
4. Data binding best practices
5. MAUI lifecycle management