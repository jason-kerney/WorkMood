<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:converters="clr-namespace:WorkMood.MauiApp.Converters"
             xmlns:viewmodels="clr-namespace:WorkMood.MauiApp.ViewModels"
             x:Class="WorkMood.MauiApp.Pages.MoodRecording"
             x:DataType="viewmodels:MoodRecordingViewModel"
             Title="Record Mood">
    
    <ContentPage.Resources>
        <ResourceDictionary>
            <converters:BoolToColorConverter x:Key="BoolToColorConverter" />
            <converters:InverseBoolConverter x:Key="InverseBoolConverter" />
        </ResourceDictionary>
    </ContentPage.Resources>

    <Grid RowDefinitions="Auto,*,Auto" Padding="20">
        
        <!-- Header -->
        <StackLayout Grid.Row="0" Spacing="10" Margin="0,0,0,20">
            <Label Text="Daily Mood Tracker" 
                   Style="{StaticResource Headline}"
                   HorizontalOptions="Center"
                   SemanticProperties.HeadingLevel="Level1" />
            
            <Label Text="{Binding CurrentDate}" 
                   Style="{StaticResource SubHeadline}"
                   HorizontalOptions="Center"
                   SemanticProperties.HeadingLevel="Level2" />
        </StackLayout>

        <!-- Main Content -->
        <ScrollView Grid.Row="1">
            <StackLayout Spacing="30">
                
                <!-- Morning Mood Section -->
                <Border BackgroundColor="{Binding MorningMoodBorderColor}" 
                        Padding="20" 
                        StrokeThickness="0"
                        StrokeShape="RoundRectangle 10">
                    <StackLayout Spacing="15">
                        <Label Text="ðŸŒ… Morning Mood" 
                               FontSize="18" 
                               FontAttributes="Bold" 
                               TextColor="White"
                               HorizontalOptions="Center" />
                        
                        <Label Text="How are you feeling this morning? (1 = Very Bad, 10 = Excellent)" 
                               TextColor="White"
                               HorizontalOptions="Center" />
                        
                        <Label Text="{Binding MorningMoodLabel}"
                               FontSize="16" 
                               FontAttributes="Bold" 
                               TextColor="White"
                               HorizontalOptions="Center" />
                        
                        <Label Text="ðŸ”’ Click Edit to view/change your saved mood"
                               FontSize="12" 
                               TextColor="LightGray"
                               HorizontalOptions="Center"
                               IsVisible="{Binding IsMorningInfoVisible}" />
                        
                        <Button Text="{Binding EditMorningText}" 
                                Command="{Binding EditMorningCommand}"
                                BackgroundColor="#FF6B35" 
                                BorderColor="White" 
                                BorderWidth="1" 
                                TextColor="White"
                                FontSize="14"
                                FontAttributes="Bold"
                                Padding="15,8"
                                HorizontalOptions="Center"
                                IsVisible="{Binding IsEditMorningVisible}" />
                        
                        <!-- Morning Mood Radio Buttons -->
                        <Grid ColumnDefinitions="*,*,*,*,*,*,*,*,*,*" ColumnSpacing="5" IsVisible="{Binding AreMorningMoodButtonsVisible}">
                            <Button Grid.Column="0" Text="1" Command="{Binding MorningMoodSelectedCommand}" CommandParameter="1"
                                    BackgroundColor="{Binding IsMorningMood1Selected, Converter={StaticResource BoolToColorConverter}, ConverterParameter='White,Transparent'}" 
                                    BorderColor="White" BorderWidth="2" 
                                    TextColor="{Binding IsMorningMood1Selected, Converter={StaticResource BoolToColorConverter}, ConverterParameter='Black,White'}" />
                            <Button Grid.Column="1" Text="2" Command="{Binding MorningMoodSelectedCommand}" CommandParameter="2"
                                    BackgroundColor="{Binding IsMorningMood2Selected, Converter={StaticResource BoolToColorConverter}, ConverterParameter='White,Transparent'}" 
                                    BorderColor="White" BorderWidth="2" 
                                    TextColor="{Binding IsMorningMood2Selected, Converter={StaticResource BoolToColorConverter}, ConverterParameter='Black,White'}" />
                            <Button Grid.Column="2" Text="3" Command="{Binding MorningMoodSelectedCommand}" CommandParameter="3"
                                    BackgroundColor="{Binding IsMorningMood3Selected, Converter={StaticResource BoolToColorConverter}, ConverterParameter='White,Transparent'}" 
                                    BorderColor="White" BorderWidth="2" 
                                    TextColor="{Binding IsMorningMood3Selected, Converter={StaticResource BoolToColorConverter}, ConverterParameter='Black,White'}" />
                            <Button Grid.Column="3" Text="4" Command="{Binding MorningMoodSelectedCommand}" CommandParameter="4"
                                    BackgroundColor="{Binding IsMorningMood4Selected, Converter={StaticResource BoolToColorConverter}, ConverterParameter='White,Transparent'}" 
                                    BorderColor="White" BorderWidth="2" 
                                    TextColor="{Binding IsMorningMood4Selected, Converter={StaticResource BoolToColorConverter}, ConverterParameter='Black,White'}" />
                            <Button Grid.Column="4" Text="5" Command="{Binding MorningMoodSelectedCommand}" CommandParameter="5"
                                    BackgroundColor="{Binding IsMorningMood5Selected, Converter={StaticResource BoolToColorConverter}, ConverterParameter='White,Transparent'}" 
                                    BorderColor="White" BorderWidth="2" 
                                    TextColor="{Binding IsMorningMood5Selected, Converter={StaticResource BoolToColorConverter}, ConverterParameter='Black,White'}" />
                            <Button Grid.Column="5" Text="6" Command="{Binding MorningMoodSelectedCommand}" CommandParameter="6"
                                    BackgroundColor="{Binding IsMorningMood6Selected, Converter={StaticResource BoolToColorConverter}, ConverterParameter='White,Transparent'}" 
                                    BorderColor="White" BorderWidth="2" 
                                    TextColor="{Binding IsMorningMood6Selected, Converter={StaticResource BoolToColorConverter}, ConverterParameter='Black,White'}" />
                            <Button Grid.Column="6" Text="7" Command="{Binding MorningMoodSelectedCommand}" CommandParameter="7"
                                    BackgroundColor="{Binding IsMorningMood7Selected, Converter={StaticResource BoolToColorConverter}, ConverterParameter='White,Transparent'}" 
                                    BorderColor="White" BorderWidth="2" 
                                    TextColor="{Binding IsMorningMood7Selected, Converter={StaticResource BoolToColorConverter}, ConverterParameter='Black,White'}" />
                            <Button Grid.Column="7" Text="8" Command="{Binding MorningMoodSelectedCommand}" CommandParameter="8"
                                    BackgroundColor="{Binding IsMorningMood8Selected, Converter={StaticResource BoolToColorConverter}, ConverterParameter='White,Transparent'}" 
                                    BorderColor="White" BorderWidth="2" 
                                    TextColor="{Binding IsMorningMood8Selected, Converter={StaticResource BoolToColorConverter}, ConverterParameter='Black,White'}" />
                            <Button Grid.Column="8" Text="9" Command="{Binding MorningMoodSelectedCommand}" CommandParameter="9"
                                    BackgroundColor="{Binding IsMorningMood9Selected, Converter={StaticResource BoolToColorConverter}, ConverterParameter='White,Transparent'}" 
                                    BorderColor="White" BorderWidth="2" 
                                    TextColor="{Binding IsMorningMood9Selected, Converter={StaticResource BoolToColorConverter}, ConverterParameter='Black,White'}" />
                            <Button Grid.Column="9" Text="10" Command="{Binding MorningMoodSelectedCommand}" CommandParameter="10"
                                    BackgroundColor="{Binding IsMorningMood10Selected, Converter={StaticResource BoolToColorConverter}, ConverterParameter='White,Transparent'}" 
                                    BorderColor="White" BorderWidth="2" 
                                    TextColor="{Binding IsMorningMood10Selected, Converter={StaticResource BoolToColorConverter}, ConverterParameter='Black,White'}" />
                        </Grid>
                    </StackLayout>
                </Border>

                <!-- Evening Mood Section -->
                <Border BackgroundColor="{Binding EveningMoodBorderColor}" 
                        Padding="20" 
                        StrokeThickness="0"
                        StrokeShape="RoundRectangle 10">
                    <StackLayout Spacing="15">
                        <Label Text="ðŸŒ™ Evening Mood" 
                               FontSize="18" 
                               FontAttributes="Bold" 
                               TextColor="White"
                               HorizontalOptions="Center" />
                        
                        <Label Text="How are you feeling this evening? (1 = Very Bad, 10 = Excellent)" 
                               TextColor="White"
                               HorizontalOptions="Center" />
                        
                        <Label Text="{Binding EveningMoodLabel}"
                               FontSize="16" 
                               FontAttributes="Bold" 
                               TextColor="White"
                               HorizontalOptions="Center" />
                        
                        <Label Text="ðŸ”’ Click Edit to view/change your saved mood"
                               FontSize="12" 
                               TextColor="LightGray"
                               HorizontalOptions="Center"
                               IsVisible="{Binding IsEveningInfoVisible}" />
                        
                        <Button Text="{Binding EditEveningText}" 
                                Command="{Binding EditEveningCommand}"
                                BackgroundColor="#FF6B35" 
                                BorderColor="White" 
                                BorderWidth="1" 
                                TextColor="White"
                                FontSize="14"
                                FontAttributes="Bold"
                                Padding="15,8"
                                HorizontalOptions="Center"
                                IsVisible="{Binding IsEditEveningVisible}" />
                        
                        <!-- Evening Mood Radio Buttons -->
                        <Grid ColumnDefinitions="*,*,*,*,*,*,*,*,*,*" ColumnSpacing="5" IsVisible="{Binding AreEveningMoodButtonsVisible}">
                            <Button Grid.Column="0" Text="1" Command="{Binding EveningMoodSelectedCommand}" CommandParameter="1"
                                    BackgroundColor="{Binding IsEveningMood1Selected, Converter={StaticResource BoolToColorConverter}, ConverterParameter='White,Transparent'}" 
                                    BorderColor="White" BorderWidth="2" 
                                    TextColor="{Binding IsEveningMood1Selected, Converter={StaticResource BoolToColorConverter}, ConverterParameter='Black,White'}"
                                    IsEnabled="{Binding IsEveningMood1Enabled}" />
                            <Button Grid.Column="1" Text="2" Command="{Binding EveningMoodSelectedCommand}" CommandParameter="2"
                                    BackgroundColor="{Binding IsEveningMood2Selected, Converter={StaticResource BoolToColorConverter}, ConverterParameter='White,Transparent'}" 
                                    BorderColor="White" BorderWidth="2" 
                                    TextColor="{Binding IsEveningMood2Selected, Converter={StaticResource BoolToColorConverter}, ConverterParameter='Black,White'}"
                                    IsEnabled="{Binding IsEveningMood2Enabled}" />
                            <Button Grid.Column="2" Text="3" Command="{Binding EveningMoodSelectedCommand}" CommandParameter="3"
                                    BackgroundColor="{Binding IsEveningMood3Selected, Converter={StaticResource BoolToColorConverter}, ConverterParameter='White,Transparent'}" 
                                    BorderColor="White" BorderWidth="2" 
                                    TextColor="{Binding IsEveningMood3Selected, Converter={StaticResource BoolToColorConverter}, ConverterParameter='Black,White'}"
                                    IsEnabled="{Binding IsEveningMood3Enabled}" />
                            <Button Grid.Column="3" Text="4" Command="{Binding EveningMoodSelectedCommand}" CommandParameter="4"
                                    BackgroundColor="{Binding IsEveningMood4Selected, Converter={StaticResource BoolToColorConverter}, ConverterParameter='White,Transparent'}" 
                                    BorderColor="White" BorderWidth="2" 
                                    TextColor="{Binding IsEveningMood4Selected, Converter={StaticResource BoolToColorConverter}, ConverterParameter='Black,White'}"
                                    IsEnabled="{Binding IsEveningMood4Enabled}" />
                            <Button Grid.Column="4" Text="5" Command="{Binding EveningMoodSelectedCommand}" CommandParameter="5"
                                    BackgroundColor="{Binding IsEveningMood5Selected, Converter={StaticResource BoolToColorConverter}, ConverterParameter='White,Transparent'}" 
                                    BorderColor="White" BorderWidth="2" 
                                    TextColor="{Binding IsEveningMood5Selected, Converter={StaticResource BoolToColorConverter}, ConverterParameter='Black,White'}"
                                    IsEnabled="{Binding IsEveningMood5Enabled}" />
                            <Button Grid.Column="5" Text="6" Command="{Binding EveningMoodSelectedCommand}" CommandParameter="6"
                                    BackgroundColor="{Binding IsEveningMood6Selected, Converter={StaticResource BoolToColorConverter}, ConverterParameter='White,Transparent'}" 
                                    BorderColor="White" BorderWidth="2" 
                                    TextColor="{Binding IsEveningMood6Selected, Converter={StaticResource BoolToColorConverter}, ConverterParameter='Black,White'}"
                                    IsEnabled="{Binding IsEveningMood6Enabled}" />
                            <Button Grid.Column="6" Text="7" Command="{Binding EveningMoodSelectedCommand}" CommandParameter="7"
                                    BackgroundColor="{Binding IsEveningMood7Selected, Converter={StaticResource BoolToColorConverter}, ConverterParameter='White,Transparent'}" 
                                    BorderColor="White" BorderWidth="2" 
                                    TextColor="{Binding IsEveningMood7Selected, Converter={StaticResource BoolToColorConverter}, ConverterParameter='Black,White'}"
                                    IsEnabled="{Binding IsEveningMood7Enabled}" />
                            <Button Grid.Column="7" Text="8" Command="{Binding EveningMoodSelectedCommand}" CommandParameter="8"
                                    BackgroundColor="{Binding IsEveningMood8Selected, Converter={StaticResource BoolToColorConverter}, ConverterParameter='White,Transparent'}" 
                                    BorderColor="White" BorderWidth="2" 
                                    TextColor="{Binding IsEveningMood8Selected, Converter={StaticResource BoolToColorConverter}, ConverterParameter='Black,White'}"
                                    IsEnabled="{Binding IsEveningMood8Enabled}" />
                            <Button Grid.Column="8" Text="9" Command="{Binding EveningMoodSelectedCommand}" CommandParameter="9"
                                    BackgroundColor="{Binding IsEveningMood9Selected, Converter={StaticResource BoolToColorConverter}, ConverterParameter='White,Transparent'}" 
                                    BorderColor="White" BorderWidth="2" 
                                    TextColor="{Binding IsEveningMood9Selected, Converter={StaticResource BoolToColorConverter}, ConverterParameter='Black,White'}"
                                    IsEnabled="{Binding IsEveningMood9Enabled}" />
                            <Button Grid.Column="9" Text="10" Command="{Binding EveningMoodSelectedCommand}" CommandParameter="10"
                                    BackgroundColor="{Binding IsEveningMood10Selected, Converter={StaticResource BoolToColorConverter}, ConverterParameter='White,Transparent'}" 
                                    BorderColor="White" BorderWidth="2" 
                                    TextColor="{Binding IsEveningMood10Selected, Converter={StaticResource BoolToColorConverter}, ConverterParameter='Black,White'}"
                                    IsEnabled="{Binding IsEveningMood10Enabled}" />
                        </Grid>
                    </StackLayout>
                </Border>

            </StackLayout>
        </ScrollView>

        <!-- Action Buttons -->
        <StackLayout Grid.Row="2" Spacing="10" Margin="0,20,0,0">
            <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                <Button Grid.Column="0"
                        Text="Save Morning Mood"
                        Command="{Binding SaveMorningCommand}"
                        BackgroundColor="{Binding SaveMorningButtonColor}"
                        IsEnabled="{Binding IsSaveMorningEnabled}" />
                
                <Button Grid.Column="1"
                        Text="Save Evening Mood"
                        Command="{Binding SaveEveningCommand}"
                        BackgroundColor="{Binding SaveEveningButtonColor}"
                        IsEnabled="{Binding IsSaveEveningEnabled}" />
            </Grid>

            <!-- Back to Main Button -->
            <Button Text="Back to Main"
                    Command="{Binding BackToMainCommand}"
                    BackgroundColor="{StaticResource Tertiary}" />
        </StackLayout>
        
    </Grid>

</ContentPage>